<div class="container">
  <div class="flash-notifications">
  </div>
  <div class="row">
    <div class="col-4">
      <table>
        <tbody>
          <tr>
            <td>
              <%= image_tag @user.get_profile_image(200,200), class:"mt-3 rounded-circle"; %>
            </td>
          </tr>
          <tr>
            <td class="h3 font-weight-bold">
              <%= @user.name %>
            </td>
          </tr>
          <% if @user.name != "guestuser" %>
          <tr>
            <td>
              <%= link_to "いいね一覧", likes_user_path(@user.id), class: "btn btn-outline-primary" %>
            </td>
          </tr>
          <tr>
            <td>
              <%= link_to "フォロー一覧", user_followings_path(@user.id), class: "btn btn-outline-primary" %>
            </td>
          </tr>
          <tr>
            <td>
              <%= link_to "フォローワー一覧", user_followers_path(@user.id), class: "btn btn-outline-primary" %>
            </td>
          </tr>
          <tr>
            <td>通知</td>
          </tr>
          <tr>
            <td>
              <%= link_to "プロフィール編集", edit_user_path(@user.id), class: "btn btn-outline-primary" %>
            </td>
          </tr>
          <tr>
            <td>
              <%= link_to "新規投稿", new_post_path, class: "btn btn-outline-primary" %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="col-8">
      <% @posts.each do |post| %>
        <%= link_to post_path(post.id) do %>
          <%= image_tag post.image, size: "450x350" %><br>
        <% end %>
        
        <%= link_to user_path(post.user_id) do %>
          <%= image_tag post.user.get_profile_image(70,70), class:"rounded-circle" %>
        <% end %>  

        <%= link_to post_path(post.id) do %>
          <p class="text-dark"><strong><%= post.title %></strong></p>
        <% end %>
        
        <!--いいね機能で部分的に更新したい場所-->
        <div class="likes_buttons_<%= post.id %>">
          <%= render 'public/likes/like', post: post %>
        </div>
        
        <div>
          <p>コメント数:<%= post.comments.count %></p>
        </div>
        <div>
          <p><%= post.body %></p>
        </div>
      <% end %>  
    </div>
  </div>
</div>
